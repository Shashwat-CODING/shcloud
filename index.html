<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Clone - ShCloud</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --spotify-black: #121212;
            --spotify-light-black: #181818;
            --spotify-grey: #282828;
            --spotify-green: #1DB954;
            --spotify-white: #FFFFFF;
            --spotify-light-grey: #B3B3B3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: black;
            color: white;
            height: 100-vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Layout */
        .container {
            display: flex;
            flex: 1;
            height: calc(100vh - 90px);
            padding: 8px;
            gap: 8px;
        }

        /* Sidebar */
        .sidebar {
            width: 300px;
            background-color: var(--spotify-black);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .side-box {
            background-color: var(--spotify-light-black);
            border-radius: 8px;
            padding: 20px;
        }

        .side-nav ul {
            list-style: none;
        }

        .side-nav li {
            padding: 12px 0;
            color: var(--spotify-light-grey);
            cursor: pointer;
            transition: 0.3s;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .side-nav li:hover {
            color: white;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            background: linear-gradient(to bottom, #222, var(--spotify-light-black));
            border-radius: 8px;
            overflow-y: auto;
            position: relative;
        }

        .header {
            position: sticky;
            top: 0;
            padding: 16px 32px;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            z-index: 10;
        }

        .search-container {
            position: relative;
            width: 350px;
        }

        #search-input {
            width: 100%;
            padding: 12px 40px;
            border-radius: 500px;
            border: none;
            background-color: var(--spotify-grey);
            color: white;
            outline: none;
        }

        .search-container i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--spotify-light-grey);
        }

        .song-list-container {
            padding: 20px 32px;
        }

        .song-item {
            display: grid;
            grid-template-columns: 50px 1fr;
            padding: 10px;
            align-items: center;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .song-item:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .song-item.active {
            color: var(--spotify-green);
        }

        .song-info h4 {
            font-size: 1rem;
            margin-bottom: 4px;
        }

        .song-info p {
            font-size: 0.85rem;
            color: var(--spotify-light-grey);
        }

        /* Player Bar */
        .player-bar {
            height: 90px;
            background-color: black;
            display: flex;
            align-items: center;
            padding: 0 16px;
            justify-content: space-between;
        }

        .current-track {
            display: flex;
            align-items: center;
            width: 30%;
        }

        .track-img {
            width: 56px;
            height: 56px;
            background-color: var(--spotify-grey);
            border-radius: 4px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .player-controls {
            width: 40%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .control-buttons {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .play-btn {
            width: 32px;
            height: 32px;
            background-color: white;
            border-radius: 50%;
            color: black;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .play-btn:hover {
            transform: scale(1.1);
        }

        .progress-container {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
            color: var(--spotify-light-grey);
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background-color: var(--spotify-grey);
            border-radius: 2px;
            position: relative;
            cursor: pointer;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--spotify-white);
            width: 0%;
            border-radius: 2px;
        }

        .progress-bar:hover .progress-fill {
            background-color: var(--spotify-green);
        }

        .volume-controls {
            width: 30%;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 10px;
        }

        #volume-slider {
            width: 100px;
            accent-color: var(--spotify-green);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="sidebar">
            <div class="side-box side-nav">
                <ul>
                    <li><i class="fa-solid fa-house"></i> Home</li>
                    <li style="color: white;"><i class="fa-solid fa-magnifying-glass"></i> Search</li>
                </ul>
            </div>
            <div class="side-box" style="flex: 1;">
                <p style="font-weight: bold; margin-bottom: 20px;"><i class="fa-solid fa-book"></i> Your Library</p>
                <div id="library-info" style="color: var(--spotify-light-grey); font-size: 0.9rem;">
                    Loading songs...
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="header">
                <div class="search-container">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" id="search-input" placeholder="What do you want to listen to?">
                </div>
            </div>

            <div class="song-list-container">
                <h2 style="margin-bottom: 20px;">All Songs</h2>
                <div id="song-list">
                    </div>
            </div>
        </div>
    </div>

    <div class="player-bar">
        <div class="current-track">
            <div class="track-img"><i class="fa-solid fa-music"></i></div>
            <div class="song-info">
                <h4 id="current-song-title">Select a song</h4>
                <p id="current-song-artist">ShCloud</p>
            </div>
        </div>

        <div class="player-controls">
            <div class="control-buttons">
                <i class="fa-solid fa-shuffle" style="color: var(--spotify-light-grey)"></i>
                <i class="fa-solid fa-backward-step"></i>
                <div class="play-btn" id="master-play">
                    <i class="fa-solid fa-play"></i>
                </div>
                <i class="fa-solid fa-forward-step"></i>
                <i class="fa-solid fa-repeat" style="color: var(--spotify-light-grey)"></i>
            </div>
            <div class="progress-container">
                <span id="current-time">0:00</span>
                <div class="progress-bar" id="progress-bar-container">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <span id="duration">0:00</span>
            </div>
        </div>

        <div class="volume-controls">
            <i class="fa-solid fa-volume-high"></i>
            <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="1">
        </div>
    </div>

    <audio id="audio-player"></audio>

    <script>
        const songListElement = document.getElementById('song-list');
        const searchInput = document.getElementById('search-input');
        const audioPlayer = document.getElementById('audio-player');
        const masterPlay = document.getElementById('master-play');
        const currentTitle = document.getElementById('current-song-title');
        const progressFill = document.getElementById('progress-fill');
        const progressContainer = document.getElementById('progress-bar-container');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const volumeSlider = document.getElementById('volume-slider');
        const libraryInfo = document.getElementById('library-info');

        let songs = [];
        let filteredSongs = [];

        // Fetch JSON Data
        async function fetchSongs() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/Shashwat-CODING/shcloud/refs/heads/main/data.json');
                const result = await response.json();
                songs = result.data;
                filteredSongs = songs;
                libraryInfo.innerText = `${result.count} songs available`;
                displaySongs(songs);
            } catch (error) {
                console.error("Error fetching data:", error);
                songListElement.innerHTML = "<p>Error loading playlist.</p>";
            }
        }

        // Display Songs
        function displaySongs(songsToRender) {
            songListElement.innerHTML = '';
            songsToRender.forEach((song, index) => {
                const songItem = document.createElement('div');
                songItem.className = 'song-item';
                songItem.innerHTML = `
                    <div class="index">${index + 1}</div>
                    <div class="song-info">
                        <h4>${song.name}</h4>
                        <p>Track</p>
                    </div>
                `;
                songItem.onclick = () => playSong(song);
                songListElement.appendChild(songItem);
            });
        }

        // Search Functionality
        searchInput.addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            filteredSongs = songs.filter(song => 
                song.name.toLowerCase().includes(term)
            );
            displaySongs(filteredSongs);
        });

        // Play Song
        function playSong(song) {
            audioPlayer.src = song.url;
            currentTitle.innerText = song.name;
            audioPlayer.play();
            masterPlay.innerHTML = '<i class="fa-solid fa-pause"></i>';
            
            // Highlight active
            document.querySelectorAll('.song-item').forEach(el => {
                if(el.querySelector('h4').innerText === song.name) {
                    el.classList.add('active');
                } else {
                    el.classList.remove('active');
                }
            });
        }

        // Master Play/Pause Toggle
        masterPlay.onclick = () => {
            if (audioPlayer.paused || audioPlayer.currentTime <= 0) {
                audioPlayer.play();
                masterPlay.innerHTML = '<i class="fa-solid fa-pause"></i>';
            } else {
                audioPlayer.pause();
                masterPlay.innerHTML = '<i class="fa-solid fa-play"></i>';
            }
        };

        // Update Progress
        audioPlayer.addEventListener('timeupdate', () => {
            const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            progressFill.style.width = `${progress}%`;
            
            // Update timestamps
            currentTimeEl.innerText = formatTime(audioPlayer.currentTime);
            if(audioPlayer.duration) {
                durationEl.innerText = formatTime(audioPlayer.duration);
            }
        });

        // Seek
        progressContainer.onclick = (e) => {
            const width = progressContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            audioPlayer.currentTime = (clickX / width) * duration;
        };

        // Volume
        volumeSlider.oninput = (e) => {
            audioPlayer.volume = e.target.value;
        };

        function formatTime(seconds) {
            let min = Math.floor(seconds / 60);
            let sec = Math.floor(seconds % 60);
            if (sec < 10) sec = `0${sec}`;
            return `${min}:${sec}`;
        }

        // Initial Load
        fetchSongs();
    </script>
</body>
</html>
